{"ast":null,"code":"var _jsxFileName = \"/home/gauransh/Documents/assignments/prakhar/bugrep/frontend/src/components/pages/Admin.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { List, Avatar, Row, Col, Switch, Typography } from 'antd';\nimport { getUsers, changeStatus } from '../../store/actions/userActions';\nimport Unauthorised from '../../common/Unauthorised';\nconst {\n  Title\n} = Typography;\n\nclass Admin extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onAdmin = (e, id) => {\n      console.log(e, id);\n      console.log(this.state.data);\n      let form_data = new FormData();\n      form_data.append('is_superuser', e);\n      this.props.changeStatus(id, form_data);\n    };\n\n    this.onActive = (e, id) => {\n      console.log(e, id);\n      console.log(this.state.data);\n      let form_data = new FormData();\n      form_data.append('is_active', e);\n      this.props.changeStatus(id, form_data);\n    };\n\n    this.state = {\n      data: {}\n    };\n  }\n\n  componentDidMount() {\n    this.props.getUsers();\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    return {\n      data: props.users\n    };\n  }\n\n  render() {\n    if (!this.props.user.is_superuser) {\n      return /*#__PURE__*/React.createElement(Unauthorised, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 17\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      span: 22,\n      style: {\n        margin: '1.5rem'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 25\n      }\n    }, \"Users\")), /*#__PURE__*/React.createElement(List, {\n      itemLayout: \"horizontal\",\n      dataSource: this.state.data,\n      renderItem: item => /*#__PURE__*/React.createElement(List.Item, {\n        id: item.id,\n        actions: this.props.user.id !== item.id ? [/*#__PURE__*/React.createElement(Switch, {\n          onClick: e => this.onAdmin(e, item.id),\n          checkedChildren: \"admin\",\n          unCheckedChildren: \"admin\",\n          checked: item.is_superuser,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 72\n          }\n        }), /*#__PURE__*/React.createElement(Switch, {\n          checkedChildren: \"active\",\n          unCheckedChildren: \"active\",\n          onClick: e => this.onActive(e, item.id),\n          checked: item.is_active,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 204\n          }\n        })] : null,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(List.Item.Meta, {\n        avatar: item.profile ? /*#__PURE__*/React.createElement(Avatar, {\n          src: item.profile,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 60\n          }\n        }) : /*#__PURE__*/React.createElement(Avatar, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 92\n          }\n        }, item.first_name[0]),\n        title: item.first_name + ' ' + item.last_name,\n        description: \"Reported Bugs:\" + item.no_of_issues + \", Projects:\" + item.no_of_projects,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 33\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  users: state.user.users,\n  user: state.auth.user\n});\n\nexport default connect(mapStateToProps, {\n  getUsers,\n  changeStatus\n})(Admin);","map":{"version":3,"sources":["/home/gauransh/Documents/assignments/prakhar/bugrep/frontend/src/components/pages/Admin.js"],"names":["React","connect","List","Avatar","Row","Col","Switch","Typography","getUsers","changeStatus","Unauthorised","Title","Admin","Component","constructor","props","onAdmin","e","id","console","log","state","data","form_data","FormData","append","onActive","componentDidMount","getDerivedStateFromProps","users","render","user","is_superuser","margin","item","is_active","profile","first_name","last_name","no_of_issues","no_of_projects","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { List, Avatar, Row, Col, Switch, Typography } from 'antd';\nimport { getUsers, changeStatus } from '../../store/actions/userActions';\nimport Unauthorised from '../../common/Unauthorised';\n\nconst { Title } = Typography;\n\n\nclass Admin extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: {},\n        }\n    }\n\n    componentDidMount() {\n        this.props.getUsers();\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        return {\n            data: props.users\n        }\n    }\n\n    onAdmin = (e, id) => {\n        console.log(e, id);\n        console.log(this.state.data);\n        let form_data = new FormData();\n        form_data.append('is_superuser', e);\n        this.props.changeStatus(id, form_data);\n    }\n\n    onActive = (e, id) => {\n        console.log(e, id);\n        console.log(this.state.data);\n        let form_data = new FormData();\n        form_data.append('is_active', e);\n        this.props.changeStatus(id, form_data);\n    }\n\n    render() {\n        if(!this.props.user.is_superuser){\n            return (\n                <Unauthorised />\n            )\n        }\n        return (\n            <Row>\n                <Col span={22} style={{ margin: '1.5rem' }}>\n                    <Typography>\n                        <Title>Users</Title>\n                    </Typography>\n                    <List\n                        itemLayout=\"horizontal\"\n                        dataSource={this.state.data}\n                        renderItem={item => (\n                            <List.Item\n                                id={item.id}\n                                actions={this.props.user.id!==item.id?[<Switch onClick={(e) => this.onAdmin(e, item.id)} checkedChildren=\"admin\" unCheckedChildren=\"admin\" checked={item.is_superuser} />, <Switch checkedChildren=\"active\" unCheckedChildren=\"active\" onClick={(e) => this.onActive(e, item.id)} checked={item.is_active} />]:null}\n                            >\n                                <List.Item.Meta\n                                    avatar={item.profile ? <Avatar src={item.profile} /> : <Avatar>{item.first_name[0]}</Avatar>}\n                                    title={item.first_name+' '+item.last_name}\n                                    description={\"Reported Bugs:\"+item.no_of_issues+\", Projects:\"+item.no_of_projects}\n                                />\n                            </List.Item>\n                        )}\n                    />\n                </Col>\n            </Row>\n            \n        );\n    }\n}\n\nconst mapStateToProps = state => ({\n    users: state.user.users,\n    user: state.auth.user\n})\n\nexport default connect(mapStateToProps, { getUsers, changeStatus })(Admin);\n"]},"metadata":{},"sourceType":"module"}